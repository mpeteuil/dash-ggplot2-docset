<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8"/>
<title>facet_grid. ggplot2 1.0.1.9003</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="author" content=""/>

<link href="css/bootstrap.css" rel="stylesheet"/>
<link href="css/bootstrap-responsive.css" rel="stylesheet"/>
<link href="css/highlight.css" rel="stylesheet"/>
<link href="css/staticdocs.css" rel="stylesheet"/>

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-67989-15']);
  _gaq.push(['_setDomainName', 'ggplot2.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">ggplot2 1.0.1.9003</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Lay out panels in a grid.</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>facet_grid(facets, margins = FALSE, scales = &#34;fixed&#34;, space = &#34;fixed&#34;, shrink = TRUE, labeller = &#34;label_value&#34;, as.table = TRUE, switch = NULL, drop = TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>facets</dt>
      <dd>a formula with the rows (of the tabular display) on the LHS
and the columns (of the tabular display) on the RHS; the dot in the
formula is used to indicate there should be no faceting on this dimension
(either row or column). The formula can also be provided as a string
instead of a classical formula object</dd>
      <dt>margins</dt>
      <dd>either a logical value or a character
vector. Margins are additional facets which contain all the data
for each of the possible values of the faceting variables. If
<code>FALSE</code>, no additional facets are included (the
default). If <code>TRUE</code>, margins are included for all faceting
variables. If specified as a character vector, it is the names of
variables for which margins are to be created.</dd>
      <dt>scales</dt>
      <dd>Are scales shared across all facets (the default,
<code>&#34;fixed&#34;</code>), or do they vary across rows (<code>&#34;free_x&#34;</code>),
columns (<code>&#34;free_y&#34;</code>), or both rows and columns (<code>&#34;free&#34;</code>)</dd>
      <dt>space</dt>
      <dd>If <code>&#34;fixed&#34;</code>, the default, all panels have the same size.
 If <code>&#34;free_y&#34;</code> their height will be proportional to the length of the
 y scale; if <code>&#34;free_x&#34;</code> their width will be proportional to the
length of the x scale; or if <code>&#34;free&#34;</code> both height and width will
vary.  This setting has no effect unless the appropriate scales also vary.</dd>
      <dt>shrink</dt>
      <dd>If <code>TRUE</code>, will shrink scales to fit output of
statistics, not raw data. If <code>FALSE</code>, will be range of raw data
before statistical summary.</dd>
      <dt>labeller</dt>
      <dd>A function that takes one data frame of labels and
returns a list or data frame of character vectors. Each input
column corresponds to one factor. Thus there will be more than
one with formulae of the type <code>~cyl + am</code>. Each output
column gets displayed as one separate line in the strip
label. This function should inherit from the &#34;labeller&#34; S3 class
for compatibility with <code><a class="dashingAutolink" name="autolink-39"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/labeller"></a><a href="labeller.html">labeller</a>()</code>. See
<code><a class="dashingAutolink" name="autolink-40"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/label_value"></a><a href="labellers.html">label_value</a></code> for more details and pointers to other
options.</dd>
      <dt>as.table</dt>
      <dd>If <code>TRUE</code>, the default, the facets are laid out like
a table with highest values at the bottom-right. If <code>FALSE</code>, the
facets are laid out like a plot with the highest value at the top-right.</dd>
      <dt>switch</dt>
      <dd>By default, the labels are displayed on the top and
right of the plot. If <code>&#34;x&#34;</code>, the top labels will be
displayed to the bottom. If <code>&#34;y&#34;</code>, the right-hand side
labels will be displayed to the left. Can also be set to
<code>&#34;both&#34;</code>.</dd>
      <dt>drop</dt>
      <dd>If <code>TRUE</code>, the default, all factor levels not used in the
data will automatically be dropped. If <code>FALSE</code>, all factor levels
will be shown, regardless of whether or not they appear in the data.</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>

      <p>Lay out panels in a grid.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class="input">
p &lt;- ggplot(mtcars, aes(mpg, wt)) + geom_point()
# With one variable
p + facet_grid(. ~ cyl)
</div>
<p><img src="facet_grid-2.png" alt="" width="540" height="400"/></p>
<div class="input">p + facet_grid(cyl ~ .)
</div>
<p><img src="facet_grid-4.png" alt="" width="540" height="400"/></p>
<div class="input">
# With two variables
p + facet_grid(vs ~ am)
</div>
<p><img src="facet_grid-6.png" alt="" width="540" height="400"/></p>
<div class="input">p + facet_grid(am ~ vs)
</div>
<p><img src="facet_grid-8.png" alt="" width="540" height="400"/></p>
<div class="input">p + facet_grid(vs ~ am, margins=TRUE)
</div>
<p><img src="facet_grid-10.png" alt="" width="540" height="400"/></p>
<div class="input">
# To change plot order of facet grid,
# change the order of variable levels with factor()

set.seed(6809)
diamonds &lt;- diamonds[sample(nrow(diamonds), 1000), ]
diamonds$cut &lt;- factor(diamonds$cut,
         levels = c(&#34;Ideal&#34;, &#34;Very Good&#34;, &#34;Fair&#34;, &#34;Good&#34;, &#34;Premium&#34;))

# Repeat first example with new order
p &lt;- ggplot(diamonds, aes(carat, ..density..)) +
        geom_histogram(binwidth = 1)
p + facet_grid(. ~ cut)
</div>
<p><img src="facet_grid-12.png" alt="" width="540" height="400"/></p>
<div class="input">
g &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point()
g + facet_grid(. ~ vs + am)
</div>
<p><img src="facet_grid-14.png" alt="" width="540" height="400"/></p>
<div class="input">g + facet_grid(vs + am ~ .)
</div>
<p><img src="facet_grid-16.png" alt="" width="540" height="400"/></p>
<div class="input">
# You can also use strings, which makes it a little easier
# when writing functions that generate faceting specifications

p + facet_grid(&#34;cut ~ .&#34;)
</div>
<p><img src="facet_grid-18.png" alt="" width="540" height="400"/></p>
<div class="input">
# see also ?plotmatrix for the scatterplot matrix

# If there isn&#39;t any data for a given combination, that panel
# will be empty

g + facet_grid(cyl ~ vs)
</div>
<p><img src="facet_grid-20.png" alt="" width="540" height="400"/></p>
<div class="input">
# If you combine a facetted dataset with a dataset that lacks those
# facetting variables, the data will be repeated across the missing
# combinations:

g + facet_grid(vs ~ cyl)
</div>
<p><img src="facet_grid-22.png" alt="" width="540" height="400"/></p>
<div class="input">
df &lt;- data.frame(mpg = 22, wt = 3)
g + facet_grid(vs ~ cyl) +
  geom_point(data = df, colour = &#34;red&#34;, size = 2)
</div>
<p><img src="facet_grid-24.png" alt="" width="540" height="400"/></p>
<div class="input">
df2 &lt;- data.frame(mpg = c(19, 22), wt = c(2,4), vs = c(0, 1))
g + facet_grid(vs ~ cyl) +
  geom_point(data = df2, colour = &#34;red&#34;, size = 2)
</div>
<p><img src="facet_grid-26.png" alt="" width="540" height="400"/></p>
<div class="input">
df3 &lt;- data.frame(mpg = c(19, 22), wt = c(2,4), vs = c(1, 1))
g + facet_grid(vs ~ cyl) +
  geom_point(data = df3, colour = &#34;red&#34;, size = 2)
</div>
<p><img src="facet_grid-28.png" alt="" width="540" height="400"/></p>
<div class="input">

# You can also choose whether the scales should be constant
# across all panels (the default), or whether they should be allowed
# to vary
mt &lt;- ggplot(mtcars, aes(mpg, wt, colour = factor(cyl))) +
  geom_point()

mt + facet_grid(. ~ cyl, scales = &#34;free&#34;)
</div>
<p><img src="facet_grid-30.png" alt="" width="540" height="400"/></p>
<div class="input"># If scales and space are free, then the mapping between position
# and values in the data will be the same across all panels
mt + facet_grid(. ~ cyl, scales = &#34;free&#34;, space = &#34;free&#34;)
</div>
<p><img src="facet_grid-32.png" alt="" width="540" height="400"/></p>
<div class="input">
mt + facet_grid(vs ~ am, scales = &#34;free&#34;)
</div>
<p><img src="facet_grid-34.png" alt="" width="540" height="400"/></p>
<div class="input">mt + facet_grid(vs ~ am, scales = &#34;free_x&#34;)
</div>
<p><img src="facet_grid-36.png" alt="" width="540" height="400"/></p>
<div class="input">mt + facet_grid(vs ~ am, scales = &#34;free_y&#34;)
</div>
<p><img src="facet_grid-38.png" alt="" width="540" height="400"/></p>
<div class="input">mt + facet_grid(vs ~ am, scales = &#34;free&#34;, space = &#34;free&#34;)
</div>
<p><img src="facet_grid-40.png" alt="" width="540" height="400"/></p>
<div class="input">mt + facet_grid(vs ~ am, scales = &#34;free&#34;, space = &#34;free_x&#34;)
</div>
<p><img src="facet_grid-42.png" alt="" width="540" height="400"/></p>
<div class="input">mt + facet_grid(vs ~ am, scales = &#34;free&#34;, space = &#34;free_y&#34;)
</div>
<p><img src="facet_grid-44.png" alt="" width="540" height="400"/></p>
<div class="input">
# You may need to set your own breaks for consistent display:
mt + facet_grid(. ~ cyl, scales = &#34;free_x&#34;, space = &#34;free&#34;) +
  scale_x_continuous(breaks = seq(10, 36, by = 2))
</div>
<p><img src="facet_grid-46.png" alt="" width="540" height="400"/></p>
<div class="input"># Adding scale limits override free scales:
last_plot() + xlim(10, 15)
</div>
<strong class="message">Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which will replace the existing scale.</strong>
<strong class="warning">Warning message:
Removed 26 rows containing missing values (geom_point).</strong>
<p><img src="facet_grid-50.png" alt="" width="540" height="400"/></p>
<div class="input">
# Free scales are particularly useful for categorical variables
ggplot(mpg, aes(cty, model)) +
  geom_point() +
  facet_grid(manufacturer ~ ., scales = &#34;free&#34;, space = &#34;free&#34;)
</div>
<p><img src="facet_grid-52.png" alt="" width="540" height="400"/></p>
<div class="input"># particularly when you reorder factor levels
mpg$model &lt;- reorder(mpg$model, mpg$cty)
manufacturer &lt;- reorder(mpg$manufacturer, mpg$cty)
last_plot() %+% mpg + theme(strip.text.y = element_text())
</div>
<p><img src="facet_grid-54.png" alt="" width="540" height="400"/></p>
<div class="input">
# Use as.table to to control direction of horizontal facets, TRUE by default
h &lt;- ggplot(mtcars, aes(x = mpg, y = wt)) +
  geom_point()
h + facet_grid(cyl ~ vs)
</div>
<p><img src="facet_grid-56.png" alt="" width="540" height="400"/></p>
<div class="input">h + facet_grid(cyl ~ vs, as.table = FALSE)
</div>
<p><img src="facet_grid-58.png" alt="" width="540" height="400"/></p>
<div class="input">
# Use labeller to control facet labels, label_value is default
h + facet_grid(cyl ~ vs, labeller = label_both)
</div>
<p><img src="facet_grid-60.png" alt="" width="540" height="400"/></p>
<div class="input"># Using label_parsed, see ?plotmath for more options
mtcars$cyl2 &lt;- factor(mtcars$cyl, labels = c(&#34;alpha&#34;, &#34;beta&#34;, &#34;sqrt(x, y)&#34;))
k &lt;- ggplot(mtcars, aes(wt, mpg)) +
  geom_point()
k + facet_grid(. ~ cyl2)
</div>
<p><img src="facet_grid-62.png" alt="" width="540" height="400"/></p>
<div class="input">k + facet_grid(. ~ cyl2, labeller = label_parsed)
</div>
<p><img src="facet_grid-64.png" alt="" width="540" height="400"/></p>
<div class="input"># For label_bquote the label value is x.
p &lt;- ggplot(mtcars, aes(wt, mpg)) +
  geom_point()
p + facet_grid(. ~ vs, labeller = label_bquote(alpha ^ .(x)))
</div>
<strong class="warning">Warning message:
Referring to `x` is deprecated, use variable name instead</strong>
<p><img src="facet_grid-67.png" alt="" width="540" height="400"/></p>
<div class="input">p + facet_grid(. ~ vs, labeller = label_bquote(.(x) ^ .(x)))
</div>
<strong class="warning">Warning message:
Referring to `x` is deprecated, use variable name instead</strong>
<p><img src="facet_grid-70.png" alt="" width="540" height="400"/></p>
<div class="input">
# Margins can be specified by logically (all yes or all no) or by specific
# variables as (character) variable names
mg &lt;- ggplot(mtcars, aes(x = mpg, y = wt)) + geom_point()
mg + facet_grid(vs + am ~ gear)
</div>
<p><img src="facet_grid-72.png" alt="" width="540" height="400"/></p>
<div class="input">mg + facet_grid(vs + am ~ gear, margins = TRUE)
</div>
<p><img src="facet_grid-74.png" alt="" width="540" height="400"/></p>
<div class="input">mg + facet_grid(vs + am ~ gear, margins = &#34;am&#34;)
</div>
<p><img src="facet_grid-76.png" alt="" width="540" height="400"/></p>
<div class="input"># when margins are made over &#34;vs&#34;, since the facets for &#34;am&#34; vary
# within the values of &#34;vs&#34;, the marginal facet for &#34;vs&#34; is also
# a margin over &#34;am&#34;.
mg + facet_grid(vs + am ~ gear, margins = &#34;vs&#34;)
</div>
<p><img src="facet_grid-78.png" alt="" width="540" height="400"/></p>
<div class="input">mg + facet_grid(vs + am ~ gear, margins = &#34;gear&#34;)
</div>
<p><img src="facet_grid-80.png" alt="" width="540" height="400"/></p>
<div class="input">mg + facet_grid(vs + am ~ gear, margins = c(&#34;gear&#34;, &#34;am&#34;))
</div>
<p><img src="facet_grid-82.png" alt="" width="540" height="400"/></p>
<div class="input">
# The facet strips can be displayed near the axes with switch
data &lt;- transform(mtcars,
  am = factor(am, levels = 0:1, c(&#34;Automatic&#34;, &#34;Manual&#34;)),
  gear = factor(gear, levels = 3:5, labels = c(&#34;Three&#34;, &#34;Four&#34;, &#34;Five&#34;))
)
p &lt;- ggplot(data, aes(mpg, disp)) + geom_point()
p + facet_grid(am ~ gear, switch = &#34;both&#34;) + theme_light()
</div>
<p><img src="facet_grid-84.png" alt="" width="540" height="400"/></p>
<div class="input">
# It may be more aesthetic to use a theme without boxes around
# around the strips.
p + facet_grid(am ~ gear + vs, switch = &#34;y&#34;) + theme_minimal()
</div>
<p><img src="facet_grid-86.png" alt="" width="540" height="400"/></p>
<div class="input">p + facet_grid(am ~ ., switch = &#34;y&#34;) +
  theme_gray() %+replace% theme(strip.background  = element_blank())
</div>
<p><img src="facet_grid-88.png" alt="" width="540" height="400"/></p>
<div class="input"></div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>facet_grid</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>

<p class="feedback">What do you think of the documentation?  <a href="http://hadley.wufoo.com/forms/documentation-feedback/def/field0=facet_grid">Please let me know by filling out this short online survey</a>.</p>

<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  
</body></html>